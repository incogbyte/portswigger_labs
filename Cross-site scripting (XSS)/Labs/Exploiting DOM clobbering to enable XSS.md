----

### Lab description

This lab contains a DOM-clobbering vulnerability. The comment functionality allows "safe" HTML. To solve this lab, construct an HTML injection that clobbers a variable and uses XSS to call the `alert()` function.


### Lab solution

- Create a comment with the comment bellow ``let defaultAvatar = window.defaultAvatar || {avatar: '/resources/images/avatarDefault.svg'}``

![](/static/img/Pasted_image_20230703081201.png)

- Next, create another comment with random string.

![](/static/img/Pasted_image_20230703081257.png)

- Lab solved


![](/static/img/Pasted_image_20230703081319.png)


> Notes about `cid:` -> `cid:` protocol, which does not URL-encode double-quotes. This means you can inject an encoded double-quote that will be decoded at runtime